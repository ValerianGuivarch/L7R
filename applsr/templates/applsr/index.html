<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Les Sept Rois - la Guerre des Ombres</title>
    <link href="{% static 'applsr/css/l7r.css' %}" rel="stylesheet">
    <link href="{% static 'applsr/css/lsr.css' %}" rel="stylesheet">
</head>

<body class="pc-page">
    {% include "applsr/templates.html" %}

    <script>
        var parts = location.pathname.split("/");
        var nompj = parts[parts.length - 1];
        function getCurrentCharacter() {
            return nompj;
        }
    </script>
    <script src="{% static 'applsr/js/lsr.js' %}"></script>

    <div class="main container">
        <h4 class="perso-title text-center"><b>{{ car.name|title }}</b> - {{ element }}
            niv. {{ car.niveau }}
        </h4>

        <table class="perso">
            <tr>
                <td rowspan="4">
                    {% with 'applsr/'|add:car.name|add:".png" as filepath %}
                    <img alt="Ce PJ n'a pas d'image" class="figure-img img-fluid rounded" src="{% static filepath %}" style="width:100px; height:auto" />
                    {% endwith %}
                </td>
            </tr>
            <tr title="Force physique, malus de 1 pour chaque tranche de 6 PV en dessous du maximum">
                <td>
                    <figure>
                        {% with 'applsr/'|add:"chair.png" as filepath %}
                        <img alt="" class="figure-img img-fluid rounded" src="{% static filepath %}" style="width:30px; height:auto" />
                        {% endwith %}
                    </figure>
                </td>
                <td>Chair : {{ car.chair }}</td>
                <td><i>Lux :</i><br />
                    <p style="color:orange">{{ car.fl }}</p>
                </td>
            </tr>
            <tr title="Force mentale, peut-être utilisé pour se défendre contre n'importe quel type d'attaque et aider n'importe quel action">
                <td>
                    <figure>
                        {% with 'applsr/'|add:"esprit.png" as filepath %}
                        <img alt="" class="PF" src="{% static filepath %}" style="width:30px; height:auto" />
                        {% endwith %}
                    </figure>
                </td>
                <td>Esprit : {{ car.esprit }}</td>
                <td><i>Umbra :</i><br />
                    <p style="color:red">{{ car.fu }}</p>
                </td>
            </tr>
            <tr title="Puissance magique">
                <td>
                    <figure>
                        {% with 'applsr/'|add:"essence.png" as filepath %}
                        <img alt="" class="PF" src="{% static filepath %}" style="width:30px; height:auto" />
                        {% endwith %}
                    </figure>
                </td>
                <td>Essence : {{ car.essence }}</td>
                <td><i>Secunda :</i><br>
                    <p style="color:blue">{{ car.fs }}</p>
                </td>
            </tr>
        </table>

        <div class="control-panel">

            <div class="line">
                <!-- pv -->
                <label>
                    <span class="btn-group">
                        <button class="btn btn-info" onclick="moinsPv(nompj);">-</button>
                        <button class="btn btn-info" disabled>PV : <span id="pv">{{ car.point_de_vie }}</span> / {{ car.point_de_vie_max }}
                        </button>
                        <button class="btn btn-info" onclick="plusPv(nompj);">+</button>
                    </span>
                </label>
                <!-- dettes -->
                <label>
                    <span class="btn-group">
                        <button class="btn btn-info" onclick="moinsDt(nompj);">-</button>
                        <button class="btn btn-info" disabled>Dettes : <span id="dettes">{{ car.dettes }}</span></button>
                        <button class="btn btn-info" onclick="plusDt(nompj);">+</button>
                    </span>
                </label>
                <!-- arcanes -->
                <label>
                    <span class="btn-group">
                        <button class="btn btn-info" onclick="moinsAk(nompj);">-</button>
                        <button class="btn btn-info" disabled>Arcanes : <span id="arcanes">{{ car.arcanes }}</span> / {{ car.arcanes_max }}
                        </button>
                        <button class="btn btn-info" onclick="plusAk(nompj);">+</button>
                    </span>
                </label>
            </div>

            <div class="line">
                <!-- pf -->
                <label>
                    <span class="btn-group">
                        <button class="btn btn-info" onclick="moinsPf(nompj);">-</button>
                        <button class="btn btn-info">
                            <input autocomplete="off" id="use_pf" type="checkbox"> PF : <span id="pf">{{ car.point_de_focus }}</span> / {{ car.point_de_focus_max }}
                        </button>
                        <button class="btn btn-info" onclick="plusPf(nompj);">+</button>
                    </span>
                </label>

                <!-- pp -->
                <label>
                    <span class="btn-group" title="Ne peut pas être utilisé sur le jets d'arcane">
                        <button class="btn btn-info" onclick="moinsPp(nompj);">-</button>
                        <button class="btn btn-info">
                            <input autocomplete="off" id="use_pp" type="checkbox"> PP : <span id="pp">{{ car.point_de_pouvoir }}</span> / {{ car.point_de_pouvoir_max }}
                        </button>
                        <button class="btn btn-info" onclick="plusPp(nompj);">+</button>
                    </span>
                </label>
            </div>

            <div class="line">
                <!-- force -->
                <label title="Une réussite supplémentaire">
                    <span class="btn">
                        <input autocomplete="off" id="use_ra" type="checkbox" />
                        {% if car.niveau <= 13 %}
                            {{ force1 }}
                        {% else %}
                            {{ force1 }} / {{ force2 }}
                        {% endif %}
                    </span>
                </label>

                <!-- secret -->
                <label>
                    <span class="btn">
                        <input autocomplete="off" id="use_sc" type="checkbox">
                        Secret
                    </span>
                </label>
            </div>

            <div class="line">
                <!-- malédictions -->
                <label>
                    <span class="btn-group">
                        <button class="btn btn-danger" onclick="moinsMalus(nompj);">-</button>
                        <button class="btn btn-outline-danger">Malédictions : <span id="malus">0</span></button>
                        <button class="btn btn-danger" onclick="plusMalus(nompj);">+</button>
                    </span>
                </label>

                <!-- bénédictions -->
                <label>
                    <span class="btn-group">
                        <button class="btn btn-success" onclick="moinsBonus(nompj);">-</button>
                        <button class="btn btn-outline-success">Bénédictions : <span id="bonus">0</span></button>
                        <button class="btn btn-success" onclick="plusBonus(nompj);">+</button>
                    </span>
                </label>
            </div>

            <div class="line">
                <!-- jet chair -->
                <label>
                    <button class="btn btn-info" onclick="loadLancer(nompj, 'JC', document.getElementById('use_pf').checked, document.getElementById('use_pp').checked, document.getElementById('use_ra').checked, document.getElementById('use_sc').checked);">Jet de Chair
                    </button>
                </label>
                <!-- jet esprit -->
                <label>
                    <button class="btn btn-info" onclick="loadLancer(nompj, 'JS', document.getElementById('use_pf').checked, document.getElementById('use_pp').checked, document.getElementById('use_ra').checked, document.getElementById('use_sc').checked);">Jet d'Esprit
                    </button>
                </label>
                <!-- jet essence -->
                <label>
                    <button class="btn btn-info" onclick="loadLancer(nompj, 'JE', document.getElementById('use_pf').checked, document.getElementById('use_pp').checked, document.getElementById('use_ra').checked, document.getElementById('use_sc').checked);">Jet d'Essence
                    </button>
                </label>
                <!-- jet mort -->
                <label>
                    <button class="btn btn-info" onclick="loadLancerJdSvM(nompj);">
                        Mort
                    </button>
                </label>
            </div>

            <div class="line">
                <!-- jet magie -->
                <label title="Ajoute un dette et fait un jet d'essence">
                    <button class="btn btn-info" onclick="loadLancer(nompj, 'JM', document.getElementById('use_pf').checked, document.getElementById('use_pp').checked, document.getElementById('use_ra').checked, document.getElementById('use_sc').checked);">Jet de Magie</button>
                </label>
                <!-- jet soin -->
                <label>
                    <button class="btn btn-info" onclick="loadLancer(nompj, 'Jsoin', document.getElementById('use_pf').checked, document.getElementById('use_pp').checked, document.getElementById('use_ra').checked, document.getElementById('use_sc').checked);">Jet de Soin
                    </button>
                </label>
                <!-- jet empirique -->
                <label title="Jette n'importe quel type de dés">
                    <button class="btn btn-info" onclick="loadLancerEmpirique(nompj, document.getElementById('use_sc').checked);">Jet Empirique</button>
                </label>
            </div>

            <div class="line">
                <!-- utilisation arcane fixe -->
                <label title="Enlève une utilisation d'arcane">
                    <button class="btn btn-info" onclick="loadLancer(nompj, 'JAF', document.getElementById('use_pf').checked, false, document.getElementById('use_ra').checked, document.getElementById('use_sc').checked );">Arcane Fixe</button>
                </label>
                <!-- jet arcane esprit -->
                <label title="Enlève une utilisation d'arcane et fait un jet d'esprit">
                    <button class="btn btn-info" onclick="loadLancer(nompj, 'JAE', document.getElementById('use_pf').checked, false, document.getElementById('use_ra').checked, document.getElementById('use_sc').checked );">Arcane d'Esprit
                    </button>
                </label>
                <!-- jet arcane essence -->
                <label title="Enlève une utilisation d'arcane et fait un jet d'essence">
                    <button class="btn btn-info" onclick="loadLancer(nompj, 'JAS', document.getElementById('use_pf').checked, false, document.getElementById('use_ra').checked, document.getElementById('use_sc').checked );">Arcane d'Essence
                    </button>
                </label>
            </div>

        </div>

        <div class="pc-container"></div>

        <div id="chat"></div>
    </div>

    <script>
        document.querySelector(".pc-container").appendChild(createCharacter("{{ car.name }}"));
    </script>
</body>

</html>